{% extends 'base.html.twig' %}

{% block body %}

{#{% macro medis(categories, questions) %}

        {% for category in categories %}
            <li data-cslug="{{ category.slug }}">
               {{ category.categoryName }}
               {% if category.questions %}
                    <ul id="questionList">
                        {% for question in questions %}
                            <li data-qslug="{{ question.slug }}">
                            {{ question.question }}
                            </li>
                        {% endfor %}
                    </ul>
                {% endif %}
            </li>
        {% endfor %}
    {% endmacro %}


    {% import _self as macros %}
    <ul id="categoryList">
        {{ macros.medis(categories, questions) }}
    </ul>#}
    <h2>Categories</h2>
<div id="categories">
    <div id="leftPane">
        <ul id="categoryList">
            {% for category in categories|sortbyfield('categoryName') %}
                <li data-slug="{{ category.slug }}">
                    {{ category.categoryName }}
                </li>
            {% endfor %}
        </ul>

       {# {% if selectedCategory is not null %}
            <ul id="questionList">
                {% for question in questions %}
                    {% if selectedQuestion.slug is defined and selectedQuestion.slug == question.slug%}
                        <li class="active">
                            <div>{{ selectedQuestion.answer }}</div>
                        </li>
                    {% else %}
                        <li>
                            <a href="{{ path('faq_index', { 'categorySlug': selectedCategory.slug, 'questionSlug': question.slug }) }}"></a>
                        </li>
                    {% endif %}
                {% endfor %}
            </ul>
        {% endif %}#}

    </div>

    <div id="middlePane">

    </div>

</div>

{% endblock body %}


{% block javascripts %}

    <script>

        $(document).ready(function () {

            var splitter = $('#categories').height(600).split({
                orientation: 'vertical',
                limit: 200,
                position: '20%',
                percent: true
            });





            //console.log(categorySlug,questionSlug);

            $('#categoryList li')
                .on('click',
                    function () {
                        var categorySlug = $(this).data('slug');
                    $('#middlePane').load('http://helper/category/'+categorySlug);
                });

        });
    </script>
{% endblock %}
